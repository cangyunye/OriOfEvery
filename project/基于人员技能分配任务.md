# 基于人员技能分配任务

## 功能 

读取数据库、excel或者txt信息，分析角色技能，进行任务分配。

## 设计方案

### 数据获取

> 配置两张表

人物技能表：各项能力比重系数skill_support，简称S，能力系数无上限，以80为高级，90为专家，100+为超一流

| 人物 | CPP  | JAVA | SHELL | PYTHON | SQL  | 可分配量 |
| ---- | ---- | ---- | ----- | ------ | ---- | -------- |
| hwx  | 30   | 60   | 70    | 80     | 50   | 50       |
| cwx  | 0    | 0    | 40    | 50     | 40   | 100      |
| dwx  | 50   | 30   | 80    | 70     | 60   | 30       |
| nwx  | 0    | 100  | 80    | 0      | 30   | 70       |

名称,CPP,JAVA,SHELL,PYTHON,SQL,可分配量。

hwx,50,60,70,80,90,24,50

zwx,50,60,70,80,90,24,100

ywx,50,60,70,80,90,24,30

lwx,50,60,70,80,90,24,100

> 可分配量(需要根据其他专项任务调整，非常规时间单位)

任务属性表：各项任务相关比重系数，skill_coefficient，简称C

| 任务     | CPP  | JAVA | SHELL | PYTHON | SQL  | 预分配量 | 执行人数 |
| -------- | ---- | ---- | ----- | ------ | ---- | -------- | -------- |
| 测试框架 | 0    | 10   | 20    | 70     | 30   | 100      | 5        |
| 数据库   | 30   | 30   | 20    | 20     | 80   | 20       | 2        |
| EXCEL    | 0    | 0    | 0     | 60     | 60   | 20       | 2        |
| 脚本对比 | 0    | 0    | 50    | 60     | 10   | 10       | 1        |

任务,CPP,JAVA,SHELL,PYTHON,SQL,预分配量,执行人数

测试框架,0,10,20,50,20

数据库,30,30,20,20,80

EXCEL,0,0,0,60,60

脚本对比,0,0,50,60,10



### 技能最优推荐
1. 数据归一化（可以在输入数据时即做处理，如果有什么文字描述技能水平，则需重新定义）

2. 根据**本任务需求技能比重系数**C与**所有人物能力比重系数**S的矢量相乘，即得内积，**任务适应值**D。

   $$C*S=D​$$

3. 根据**任务适应值**D与**任务需求比重**C的方差，再求和sum。N为任务涉及技能量
     $$\sum_N\sqrt{\frac{(D-C)^2}{N}}​$$

4. 根据SUM排序

### 任务优先分配

1. 对任务进行**人工录入排序**以及**配置技能需求系数**，设置**执行人数**。
2. 列举所有任务项关联**技能最优推荐**
3. 循环起点，初始化Executor，提取当前任务，根据**执行人数**和**最优推荐人员**分配
4. 选择最优人员，判断是否已有执行任务，根据开关决定**最大人数分配任务**或维持**最优效率分配任务**
5. 对应$$\Delta$$**=可分配量-预分配量** ，$$\Delta>=0$$，则确定分配，否则判断下一位人员
6. 设置变量Executor为列表，追加选定任务执行者。
7. 再次循环，直到任务分配完毕，若任务剩余而人员已完成一轮，则重新开始循环
8. 特殊处理，如果有剩余任务，则所有人员可分配量=原始总量*1.2取整+10，再重新执行循环
9. 如果有剩余人员，则列出人员名单，并列出推荐个人最优任务排行。

```flow
st=>start: Start
Proficiency=>operation: 技能最优推荐
Assiginments=>operation: 任务分配
dataset=>inputoutput: 人物技能,任务属性
cond=>condition: 任务已分完？
sub1=>subroutine: 子任务1
sub2=>subroutine: 子任务2
e=>end: END
st->dataset->Proficiency->Assiginments->cond
cond(yes)->e
cond(no)->Assiginments
```



### 角色优先分配

1. 可分配角色列表
2. 按角色匹配最佳任务



### 经验升级

如果任务在规定时间内完成，则涉及人物**m**的第$$\beta$$项技能项$$S_m^\beta$$**升级**经验值$$\varepsilon_m^\beta$$，某项任务需求比重$$C_N$$除以总任务量sum(C)再乘以系数增幅，基本增幅常量为5，后续为控制系数，保证不超过120的封顶。

$$\varepsilon_N=5×\frac{C_N}{sum(C)}×(\frac{120-S}{120})​$$

记录版本迭代，角色升级信息

### 输出对比曲线

输出最大人数分配任务曲线

输出最优效率分配任务曲线

### 输出个人技能历史成长曲线





